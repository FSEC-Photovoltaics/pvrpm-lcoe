

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>pvrpm.core.components &mdash; PVRPM 1.5.0 documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> PVRPM
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Tutorials:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial_assumptions_limitations.html">SAM/PVRPM Assumptions / Limitations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial_getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial_installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial_logic_diagram.html">Logic Diagram</a></li>
</ul>
<p class="caption"><span class="caption-text">Examples:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../example_pvrpm_config.html">Example YAML Configuration</a></li>
</ul>
<p class="caption"><span class="caption-text">API:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../api/modules.html">pvrpm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/pvrpm.html">pvrpm package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/pvrpm.core.html">pvrpm.core package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/pvrpm.core.modules.html">pvrpm.core.modules package</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">PVRPM</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../index.html">Module code</a> &raquo;</li>
        
      <li>pvrpm.core.components</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for pvrpm.core.components</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Tuple</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>


<span class="kn">from</span> <span class="nn">pvrpm.core.enums</span> <span class="kn">import</span> <span class="n">ConfigKeys</span> <span class="k">as</span> <span class="n">ck</span>
<span class="kn">from</span> <span class="nn">pvrpm.core.case</span> <span class="kn">import</span> <span class="n">SamCase</span>
<span class="kn">from</span> <span class="nn">pvrpm.core.utils</span> <span class="kn">import</span> <span class="n">summarize_dc_energy</span>
<span class="kn">from</span> <span class="nn">pvrpm.core.logger</span> <span class="kn">import</span> <span class="n">logger</span>
<span class="kn">from</span> <span class="nn">pvrpm.core.modules</span> <span class="kn">import</span> <span class="n">failure</span><span class="p">,</span> <span class="n">monitor</span><span class="p">,</span> <span class="n">repair</span>


<div class="viewcode-block" id="Components"><a class="viewcode-back" href="../../../api/pvrpm.core.html#pvrpm.core.components.Components">[docs]</a><span class="k">class</span> <span class="nc">Components</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Data container for each component in the simulation, as well as component and simulation level data</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">case</span><span class="p">:</span> <span class="n">SamCase</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">case</span> <span class="o">=</span> <span class="n">case</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">comps</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fails</span> <span class="o">=</span> <span class="p">{</span><span class="n">c</span><span class="p">:</span> <span class="p">[]</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">ck</span><span class="o">.</span><span class="n">component_keys</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="kc">None</span><span class="p">)}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">monitors</span> <span class="o">=</span> <span class="p">{</span><span class="n">c</span><span class="p">:</span> <span class="p">[]</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">ck</span><span class="o">.</span><span class="n">component_keys</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="kc">None</span><span class="p">)}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">repairs</span> <span class="o">=</span> <span class="p">{</span><span class="n">c</span><span class="p">:</span> <span class="p">[]</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">ck</span><span class="o">.</span><span class="n">component_keys</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="kc">None</span><span class="p">)}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">costs</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># keep track of total days spent on monitoring and repairs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">total_repair_time</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">total_monitor_time</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">lifetime</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="n">ck</span><span class="o">.</span><span class="n">LIFETIME_YRS</span><span class="p">]</span>

        <span class="c1"># additional aggreate data to track during simulation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">module_degradation_factor</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">lifetime</span> <span class="o">*</span> <span class="mi">365</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dc_power_availability</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">lifetime</span> <span class="o">*</span> <span class="mi">365</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ac_power_availability</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">lifetime</span> <span class="o">*</span> <span class="mi">365</span><span class="p">)</span>

        <span class="c1"># static monitoring setup</span>
        <span class="c1"># if theres no static monitoring defined, an exception is raised</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">indep_monitor</span> <span class="o">=</span> <span class="n">monitor</span><span class="o">.</span><span class="n">IndepMonitor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">comps</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">costs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dc_power_availability</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">indep_monitor</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># every component level will contain a dataframe containing the data for all the components in that level</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">ck</span><span class="o">.</span><span class="n">component_keys</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">total_repair_time</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">total_monitor_time</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">costs</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">lifetime</span> <span class="o">*</span> <span class="mi">365</span><span class="p">)</span>
                <span class="n">df</span><span class="p">,</span> <span class="n">fails</span><span class="p">,</span> <span class="n">monitors</span><span class="p">,</span> <span class="n">repairs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">initialize_components</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">comps</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">fails</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">+=</span> <span class="n">fails</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">monitors</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">+=</span> <span class="n">monitors</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">repairs</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">+=</span> <span class="n">repairs</span>

        <span class="c1"># Data from simulation at end of realization</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timeseries_dc_power</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timeseries_ac_power</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lcoe</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">npv</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">annual_energy</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tax_cash_flow</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">losses</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="n">case</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="n">ck</span><span class="o">.</span><span class="n">TRACKING</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tracker_power_loss_factor</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">lifetime</span> <span class="o">*</span> <span class="mi">365</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tracker_availability</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">lifetime</span> <span class="o">*</span> <span class="mi">365</span><span class="p">)</span>

<div class="viewcode-block" id="Components.compound_failures"><a class="viewcode-back" href="../../../api/pvrpm.core.html#pvrpm.core.components.Components.compound_failures">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">compound_failures</span><span class="p">(</span><span class="n">function</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">parameters</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">num_fails</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Compounds the failures using the provided function and it&#39;s parameters to calculate the number of days to reduce the time to detection by</span>

<span class="sd">        Possible functions and their parameters are:</span>
<span class="sd">            - step: Failures follow a step function, each step reducing the detection time by a static amount</span>
<span class="sd">                - threshold (float): fraction 0 &lt;= threshold &lt;= 1 that signifies the amount of modules that must fail before next step is reached. So if this is 0.2, every 0.2 * total_components components that fail will reduce detection time by step</span>
<span class="sd">                - step (int): The amount of days to reduce detection time for every step. So 2 steps reduces detection time by 2 * step</span>
<span class="sd">            - exponential: Failures compound on an exponential function</span>
<span class="sd">                - base (float): The base for the exponential function &gt; 0</span>
<span class="sd">            - log: Failures compound on a logorithmic function</span>
<span class="sd">                - base (float): The base for the log function &gt; 0</span>
<span class="sd">            - linear: Failures compound linearly</span>
<span class="sd">                - slope (float): Slope of the linear function &gt; 0</span>
<span class="sd">            - constant: Each failure reduces the time to detection by a static fraction constant</span>
<span class="sd">                - constant (float): fraction 0 &lt;= frac &lt;= 1 that specifies how much of the overall time each failure reduces. So if fraction is 0.1, a failure will reduce time to detection by &quot;time_to_detection * 0.1&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Components.summarize_failures"><a class="viewcode-back" href="../../../api/pvrpm.core.html#pvrpm.core.components.Components.summarize_failures">[docs]</a>    <span class="k">def</span> <span class="nf">summarize_failures</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">component_level</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the number of failures per day for every failure defined</span>

<span class="sd">        Args:</span>
<span class="sd">            component_level (str): The configuration key for this component level</span>

<span class="sd">        Returns:</span>
<span class="sd">            :obj:`dict`: Dictionary containing the failure mode mapped to an np array of fails per each day</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">fails</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fails</span><span class="p">[</span><span class="n">component_level</span><span class="p">]:</span>
            <span class="n">fails</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">fails_per_day</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">fails</span></div>

<div class="viewcode-block" id="Components.update_labor_rates"><a class="viewcode-back" href="../../../api/pvrpm.core.html#pvrpm.core.components.Components.update_labor_rates">[docs]</a>    <span class="k">def</span> <span class="nf">update_labor_rates</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">new_labor</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update labor rates for a all levels for all types of repairs</span>

<span class="sd">        Args:</span>
<span class="sd">            new_labor (float): The new labor rate</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">indep_monitor</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">indep_monitor</span><span class="o">.</span><span class="n">update_labor_rate</span><span class="p">(</span><span class="n">new_labor</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">ck</span><span class="o">.</span><span class="n">component_keys</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">repairs</span><span class="p">[</span><span class="n">c</span><span class="p">]:</span>
                    <span class="n">r</span><span class="o">.</span><span class="n">update_labor_rate</span><span class="p">(</span><span class="n">new_labor</span><span class="p">)</span></div>

<div class="viewcode-block" id="Components.initialize_components"><a class="viewcode-back" href="../../../api/pvrpm.core.html#pvrpm.core.components.Components.initialize_components">[docs]</a>    <span class="k">def</span> <span class="nf">initialize_components</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">component_level</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initalizes all components for the first time</span>

<span class="sd">        Args:</span>
<span class="sd">            component_level (str): The configuration key for this component level</span>

<span class="sd">        Returns:</span>
<span class="sd">            :obj:`pd.DataFrame`: A dataframe containing the initalized values for this component level</span>

<span class="sd">        Note: Individual components have these columns:</span>
<span class="sd">            - state (bool): Operational (True) or failed (False)</span>
<span class="sd">            - defective (bool): Whehter component has a defect. True means the component is also eligible for the defective failure mode</span>
<span class="sd">            - time_to_failure (float): Number of days until component fails</span>
<span class="sd">            - failure_type (str): The name of the failure type time_to_failure represents</span>
<span class="sd">            - time_to_repair (float): Number of days from failure until compoent is repaired</span>
<span class="sd">            - time_to_detection (float): Number of days until the component failure is detected and repairs start</span>
<span class="sd">            - repair_times (float): the total repair time for this repair</span>
<span class="sd">            - monitor_times (float): the total monitoring time before repairs start</span>
<span class="sd">            - time_left_on_warranty (int): Number of days left on warranty (if applicable)</span>
<span class="sd">            - cumulative_failures (int): Total number of failures for that component</span>
<span class="sd">            - cumulative_oow_failures (int): Total number of out of warranty failures (if applicable)</span>
<span class="sd">            - failure_by_type_n (int): Each failure will have its own column with the number of failures of this type</span>
<span class="sd">            - defective (bool): Whether this component is defective or not (for defective failures)</span>
<span class="sd">            - defective_failures (int): Total number of defective failures</span>
<span class="sd">            - avail_downtime (int): How many hours this component was available</span>
<span class="sd">            - degradation_factor (float): 1 - percentage component has degraded at this time (module only)</span>
<span class="sd">            - days_of_degradation (int): Time that the module has been degrading for</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">component_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="n">component_level</span><span class="p">]</span>

        <span class="n">component_ind</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">component_info</span><span class="p">[</span><span class="n">ck</span><span class="o">.</span><span class="n">NUM_COMPONENT</span><span class="p">])</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="n">component_ind</span><span class="p">)</span>

        <span class="c1"># operational</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;state&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="c1"># degradation gets reset to zero</span>
        <span class="k">if</span> <span class="n">component_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ck</span><span class="o">.</span><span class="n">DEGRADE</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">df</span><span class="p">[</span><span class="s2">&quot;days_of_degradation&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">df</span><span class="p">[</span><span class="s2">&quot;degradation_factor&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="k">if</span> <span class="n">component_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ck</span><span class="o">.</span><span class="n">WARRANTY</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">df</span><span class="p">[</span><span class="s2">&quot;time_left_on_warranty&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">component_info</span><span class="p">[</span><span class="n">ck</span><span class="o">.</span><span class="n">WARRANTY</span><span class="p">][</span><span class="n">ck</span><span class="o">.</span><span class="n">DAYS</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">df</span><span class="p">[</span><span class="s2">&quot;time_left_on_warranty&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;cumulative_failures&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;cumulative_oow_failures&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;avail_downtime&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c1"># if component can&#39;t fail, nothing else needs to be initalized</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">component_info</span><span class="p">[</span><span class="n">ck</span><span class="o">.</span><span class="n">CAN_FAIL</span><span class="p">]:</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[])</span>

        <span class="k">if</span> <span class="n">component_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ck</span><span class="o">.</span><span class="n">FAILURE</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">fails</span> <span class="o">=</span> <span class="p">[</span><span class="n">failure</span><span class="o">.</span><span class="n">TotalFailure</span><span class="p">(</span><span class="n">component_level</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">indep_monitor</span><span class="p">)]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fails</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">partial_failures</span> <span class="o">=</span> <span class="n">component_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ck</span><span class="o">.</span><span class="n">PARTIAL_FAIL</span><span class="p">,</span> <span class="p">{})</span>
        <span class="n">partial_fails</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">mode</span> <span class="ow">in</span> <span class="n">partial_failures</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">partial_fails</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">failure</span><span class="o">.</span><span class="n">PartialFailure</span><span class="p">(</span><span class="n">component_level</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="p">,</span> <span class="n">mode</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">indep_monitor</span><span class="p">))</span>

        <span class="c1"># monitoring times, these will be added to the repair time for each component</span>
        <span class="c1"># basically, the time until each failure is detected</span>
        <span class="n">monitors</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># for independent monitoring, may not be used if none is defined</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;indep_monitor&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">component_info</span><span class="p">[</span><span class="n">ck</span><span class="o">.</span><span class="n">CAN_REPAIR</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">component_info</span><span class="p">[</span><span class="n">ck</span><span class="o">.</span><span class="n">CAN_MONITOR</span><span class="p">]:</span>
                <span class="n">monitors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">monitor</span><span class="o">.</span><span class="n">LevelMonitor</span><span class="p">(</span><span class="n">component_level</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="p">))</span>
            <span class="c1"># monitoring across levels, only applies if properly defined and monitoring at the component level can_monitor is false</span>
            <span class="k">elif</span> <span class="n">component_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ck</span><span class="o">.</span><span class="n">COMP_MONITOR</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
                <span class="n">monitors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">monitor</span><span class="o">.</span><span class="n">CrossLevelMonitor</span><span class="p">(</span><span class="n">component_level</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="p">))</span>
            <span class="c1"># only static detection available</span>
            <span class="k">elif</span> <span class="n">component_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ck</span><span class="o">.</span><span class="n">INDEP_MONITOR</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
                <span class="c1"># the proper detection time with only static monitoring is the difference between the static monitoring that occurs after the failure</span>
                <span class="c1"># this will be set when a component fails for simplicity sake, since multiple static monitoring schemes can be defined,</span>
                <span class="c1"># and the time to detection would be the the time from the component fails to the next static monitoring occurance</span>
                <span class="c1"># so, set these to None and assume they will be properly updated in the simulation</span>
                <span class="n">df</span><span class="p">[</span><span class="s2">&quot;monitor_times&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="n">df</span><span class="p">[</span><span class="s2">&quot;time_to_detection&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># time to replacement/repair in case of failure</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">component_info</span><span class="p">[</span><span class="n">ck</span><span class="o">.</span><span class="n">CAN_REPAIR</span><span class="p">]:</span>
            <span class="n">repairs</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">df</span><span class="p">[</span><span class="s2">&quot;time_to_repair&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># just initalize to 1 if no repair modes, means components cannot be repaired</span>
        <span class="k">elif</span> <span class="n">component_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ck</span><span class="o">.</span><span class="n">REPAIR</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
            <span class="n">repairs</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">repairs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="n">repair</span><span class="o">.</span><span class="n">TotalRepair</span><span class="p">(</span>
                    <span class="n">component_level</span><span class="p">,</span>
                    <span class="n">df</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">costs</span><span class="p">[</span><span class="n">component_level</span><span class="p">],</span>
                    <span class="n">fails</span><span class="p">,</span>
                    <span class="n">repairs</span><span class="p">,</span>
                    <span class="n">monitors</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">indep_monitor</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">repairs</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">df</span><span class="p">[</span><span class="s2">&quot;time_to_repair&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="n">partial_repairs</span> <span class="o">=</span> <span class="n">component_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ck</span><span class="o">.</span><span class="n">PARTIAL_REPAIR</span><span class="p">,</span> <span class="p">{})</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">partial_repairs</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">repair_mode</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">component_info</span><span class="p">[</span><span class="n">ck</span><span class="o">.</span><span class="n">PARTIAL_REPAIR</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">fail_mode</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">partial_failures</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
                <span class="n">repairs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="n">repair</span><span class="o">.</span><span class="n">PartialRepair</span><span class="p">(</span>
                        <span class="n">component_level</span><span class="p">,</span>
                        <span class="n">df</span><span class="p">,</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="p">,</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">costs</span><span class="p">[</span><span class="n">component_level</span><span class="p">],</span>
                        <span class="n">partial_fails</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
                        <span class="n">fail_mode</span><span class="p">,</span>
                        <span class="n">repair_mode</span><span class="p">,</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">indep_monitor</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">fail_mode</span><span class="p">,</span> <span class="n">repair_mode</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">partial_failures</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="n">partial_repairs</span><span class="o">.</span><span class="n">keys</span><span class="p">())):</span>
                <span class="n">repairs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="n">repair</span><span class="o">.</span><span class="n">PartialRepair</span><span class="p">(</span>
                        <span class="n">component_level</span><span class="p">,</span>
                        <span class="n">df</span><span class="p">,</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="p">,</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">costs</span><span class="p">[</span><span class="n">component_level</span><span class="p">],</span>
                        <span class="n">partial_fails</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
                        <span class="n">fail_mode</span><span class="p">,</span>
                        <span class="n">repair_mode</span><span class="p">,</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">indep_monitor</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="p">)</span>

        <span class="n">fails</span> <span class="o">+=</span> <span class="n">partial_fails</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">fails</span><span class="p">,</span> <span class="n">monitors</span><span class="p">,</span> <span class="n">repairs</span><span class="p">)</span></div>

<div class="viewcode-block" id="Components.tracker_power_loss"><a class="viewcode-back" href="../../../api/pvrpm.core.html#pvrpm.core.components.Components.tracker_power_loss">[docs]</a>    <span class="k">def</span> <span class="nf">tracker_power_loss</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">day</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the current loss factor due to failed trackers</span>

<span class="sd">        Args:</span>
<span class="sd">            day (int): Current day in the simulation</span>

<span class="sd">        Returns:</span>
<span class="sd">            Tuple[float, float]: The fraction of trackers operational and the loss factor for failed trackers</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">comps</span><span class="p">[</span><span class="n">ck</span><span class="o">.</span><span class="n">TRACKER</span><span class="p">]</span>
        <span class="n">day</span> <span class="o">=</span> <span class="n">day</span> <span class="o">%</span> <span class="mi">365</span>
        <span class="n">operational_trackers</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;state&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">])</span>

        <span class="n">fraction</span> <span class="o">=</span> <span class="n">operational_trackers</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
        <span class="n">adjusted_factor</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="n">ck</span><span class="o">.</span><span class="n">TRACKER</span><span class="p">][</span><span class="n">ck</span><span class="o">.</span><span class="n">CAN_FAIL</span><span class="p">]:</span>
            <span class="n">adjusted_factor</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span>
                <span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">daily_tracker_coeffs</span><span class="p">[</span><span class="n">day</span><span class="p">]</span> <span class="o">+</span> <span class="n">fraction</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">daily_tracker_coeffs</span><span class="p">[</span><span class="n">day</span><span class="p">])</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">fraction</span><span class="p">,</span> <span class="n">adjusted_factor</span></div>

<div class="viewcode-block" id="Components.current_degradation"><a class="viewcode-back" href="../../../api/pvrpm.core.html#pvrpm.core.components.Components.current_degradation">[docs]</a>    <span class="k">def</span> <span class="nf">current_degradation</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the current module degradation, which is averaged for only operational modules, since the power production hit from degradation of non-operational modules would be double counted</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Average degradation of operational modules</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="n">ck</span><span class="o">.</span><span class="n">MODULE</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ck</span><span class="o">.</span><span class="n">DEGRADE</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
            <span class="k">return</span> <span class="mi">1</span>

        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">comps</span><span class="p">[</span><span class="n">ck</span><span class="o">.</span><span class="n">MODULE</span><span class="p">]</span>
        <span class="n">operational_modules</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;state&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span>
        <span class="n">fleet_degradation_sum</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">operational_modules</span><span class="p">][</span><span class="s2">&quot;degradation_factor&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">fleet_degradation_sum</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span></div>

<div class="viewcode-block" id="Components.dc_availability"><a class="viewcode-back" href="../../../api/pvrpm.core.html#pvrpm.core.components.Components.dc_availability">[docs]</a>    <span class="k">def</span> <span class="nf">dc_availability</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the availability of the DC power due to DC component outages, including modules, strings, and combiners</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Decimal percentage of available DC modules</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">combiner_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">comps</span><span class="p">[</span><span class="n">ck</span><span class="o">.</span><span class="n">COMBINER</span><span class="p">]</span>
        <span class="n">string_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">comps</span><span class="p">[</span><span class="n">ck</span><span class="o">.</span><span class="n">STRING</span><span class="p">]</span>
        <span class="n">module_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">comps</span><span class="p">[</span><span class="n">ck</span><span class="o">.</span><span class="n">MODULE</span><span class="p">]</span>

        <span class="n">mods_per_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="n">ck</span><span class="o">.</span><span class="n">MODULES_PER_STR</span><span class="p">]</span>
        <span class="n">str_per_comb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="n">ck</span><span class="o">.</span><span class="n">STR_PER_COMBINER</span><span class="p">]</span>
        <span class="n">operational_combiners</span> <span class="o">=</span> <span class="n">combiner_df</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="n">combiner_df</span><span class="p">[</span><span class="s2">&quot;state&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">operational_strings</span> <span class="o">=</span> <span class="n">string_df</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="n">string_df</span><span class="p">[</span><span class="s2">&quot;state&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span>

        <span class="n">str_by_comb</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">string_df</span><span class="o">.</span><span class="n">index</span><span class="p">),</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">combiner_df</span><span class="p">),</span> <span class="n">str_per_comb</span><span class="p">))</span>
        <span class="n">modules_by_string</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">module_df</span><span class="o">.</span><span class="n">index</span><span class="p">),</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">string_df</span><span class="p">),</span> <span class="n">mods_per_str</span><span class="p">))</span>

        <span class="c1"># remove combiners and strings that are not operational</span>
        <span class="n">str_by_comb</span> <span class="o">=</span> <span class="n">str_by_comb</span><span class="p">[</span><span class="n">operational_combiners</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="c1"># make sure strings under operational combiners are also operational</span>
        <span class="n">operational_strings</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">intersect1d</span><span class="p">(</span><span class="n">str_by_comb</span><span class="p">,</span> <span class="n">operational_strings</span><span class="p">)</span>
        <span class="c1"># get all modules under operational strings</span>
        <span class="n">modules_by_string</span> <span class="o">=</span> <span class="n">modules_by_string</span><span class="p">[</span><span class="n">operational_strings</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>

        <span class="c1"># note that here, &quot;operational modules&quot; means modules whose power is REACHING the inverter, regardless of whether the module itself is failed or not</span>
        <span class="n">operational_modules</span> <span class="o">=</span> <span class="n">module_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">modules_by_string</span><span class="p">][</span><span class="s2">&quot;state&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">operational_modules</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">module_df</span><span class="p">)</span></div>

<div class="viewcode-block" id="Components.ac_availability"><a class="viewcode-back" href="../../../api/pvrpm.core.html#pvrpm.core.components.Components.ac_availability">[docs]</a>    <span class="k">def</span> <span class="nf">ac_availability</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculates the availability of AC power due to DC component outages, including inverters, disconnects, transformers, and the grid</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Decimal percentage of AC modules available</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">grid_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">comps</span><span class="p">[</span><span class="n">ck</span><span class="o">.</span><span class="n">GRID</span><span class="p">]</span>
        <span class="n">transformer_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">comps</span><span class="p">[</span><span class="n">ck</span><span class="o">.</span><span class="n">TRANSFORMER</span><span class="p">]</span>
        <span class="n">inverter_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">comps</span><span class="p">[</span><span class="n">ck</span><span class="o">.</span><span class="n">INVERTER</span><span class="p">]</span>
        <span class="n">disconnect_df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">comps</span><span class="p">[</span><span class="n">ck</span><span class="o">.</span><span class="n">DISCONNECT</span><span class="p">]</span>

        <span class="n">invert_per_trans</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="n">ck</span><span class="o">.</span><span class="n">INVERTER_PER_TRANS</span><span class="p">]</span>

        <span class="c1"># theres always only 1 grid</span>
        <span class="k">if</span> <span class="n">grid_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[[</span><span class="mi">0</span><span class="p">]][</span><span class="s2">&quot;state&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>

        <span class="n">operational_transformers</span> <span class="o">=</span> <span class="n">transformer_df</span><span class="o">.</span><span class="n">index</span><span class="p">[</span><span class="n">transformer_df</span><span class="p">[</span><span class="s2">&quot;state&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span>

        <span class="n">inverter_by_trans</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">inverter_df</span><span class="o">.</span><span class="n">index</span><span class="p">),</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">transformer_df</span><span class="p">),</span> <span class="n">invert_per_trans</span><span class="p">))</span>
        <span class="c1"># remove inoperal transformers and their inverters</span>
        <span class="n">inverter_by_trans</span> <span class="o">=</span> <span class="n">inverter_by_trans</span><span class="p">[</span><span class="n">operational_transformers</span><span class="p">]</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
        <span class="n">inverter_df</span> <span class="o">=</span> <span class="n">inverter_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">inverter_by_trans</span><span class="p">]</span>
        <span class="n">inverter_df</span> <span class="o">=</span> <span class="n">inverter_df</span><span class="p">[</span><span class="n">inverter_df</span><span class="p">[</span><span class="s2">&quot;state&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>
        <span class="n">disconnect_df</span> <span class="o">=</span> <span class="n">disconnect_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">inverter_by_trans</span><span class="p">]</span>
        <span class="n">disconnect_df</span> <span class="o">=</span> <span class="n">disconnect_df</span><span class="p">[</span><span class="n">disconnect_df</span><span class="p">[</span><span class="s2">&quot;state&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">index</span>

        <span class="n">operational_inverters</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">intersect1d</span><span class="p">(</span><span class="n">inverter_df</span><span class="p">,</span> <span class="n">disconnect_df</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">operational_inverters</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="n">ck</span><span class="o">.</span><span class="n">INVERTER</span><span class="p">][</span><span class="n">ck</span><span class="o">.</span><span class="n">NUM_COMPONENT</span><span class="p">]</span></div>

<div class="viewcode-block" id="Components.update_fails"><a class="viewcode-back" href="../../../api/pvrpm.core.html#pvrpm.core.components.Components.update_fails">[docs]</a>    <span class="k">def</span> <span class="nf">update_fails</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">component_level</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">day</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Changes state of a component to failed, incrementing failures and checking warranty only for failed components of each failure type</span>

<span class="sd">        Args:</span>
<span class="sd">            component_level (str): The component level to check for failures</span>
<span class="sd">            day (int): Current day in the simulation</span>

<span class="sd">        Note:</span>
<span class="sd">            Updates the underlying dataframes in place</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fails</span><span class="p">[</span><span class="n">component_level</span><span class="p">]:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">day</span><span class="p">)</span></div>

<div class="viewcode-block" id="Components.update_repairs"><a class="viewcode-back" href="../../../api/pvrpm.core.html#pvrpm.core.components.Components.update_repairs">[docs]</a>    <span class="k">def</span> <span class="nf">update_repairs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">component_level</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">day</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Changes the state of a component to operational once repairs are complete, only for components where the time to repair is zero</span>

<span class="sd">        Args:</span>
<span class="sd">            component_level (str): The component level of this repair</span>
<span class="sd">            day (int): Current day in the simulation</span>

<span class="sd">        Note:</span>
<span class="sd">            Updates the underlying dataframes in place</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">component_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="n">component_level</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">repairs</span><span class="p">[</span><span class="n">component_level</span><span class="p">]:</span>
            <span class="n">monitor_time</span><span class="p">,</span> <span class="n">repair_time</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">day</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">total_monitor_time</span><span class="p">[</span><span class="n">component_level</span><span class="p">]</span> <span class="o">+=</span> <span class="n">monitor_time</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">total_repair_time</span><span class="p">[</span><span class="n">component_level</span><span class="p">]</span> <span class="o">+=</span> <span class="n">repair_time</span>

        <span class="c1"># only reinitalize monitoring if the components repaired are fully availabile (state == 1)</span>
        <span class="c1"># this is so that if parital failures occur while the component is already detected as failed for those partial failures, then the new partial failures occuring are instantly detected until all failures are repaired</span>
        <span class="n">df</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">comps</span><span class="p">[</span><span class="n">component_level</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="n">component_level</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ck</span><span class="o">.</span><span class="n">PARTIAL_FAIL</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">&quot;time_to_detection&quot;</span> <span class="ow">in</span> <span class="n">df</span><span class="p">:</span>
            <span class="n">mask</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;state&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;time_to_detection&quot;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">mode</span><span class="p">,</span> <span class="n">fail_config</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="n">component_level</span><span class="p">][</span><span class="n">ck</span><span class="o">.</span><span class="n">PARTIAL_FAIL</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">mask</span> <span class="o">&amp;=</span> <span class="n">df</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;time_to_failure_</span><span class="si">{</span><span class="n">mode</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">1</span>

            <span class="n">repaired_comps</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">repaired_comps</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">indep_monitor</span><span class="p">:</span>
                <span class="n">repaired_comps</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">indep_monitor</span><span class="o">.</span><span class="n">reinitialize_components</span><span class="p">(</span><span class="n">repaired_comps</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">monitors</span><span class="p">[</span><span class="n">component_level</span><span class="p">]:</span>
                <span class="n">repaired_comps</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">reinitialize_components</span><span class="p">(</span><span class="n">repaired_comps</span><span class="p">)</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">component_info</span><span class="p">[</span><span class="n">ck</span><span class="o">.</span><span class="n">CAN_MONITOR</span><span class="p">]</span>
                <span class="ow">or</span> <span class="n">component_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ck</span><span class="o">.</span><span class="n">COMP_MONITOR</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                <span class="ow">or</span> <span class="n">component_info</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ck</span><span class="o">.</span><span class="n">INDEP_MONITOR</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">total_monitor_time</span><span class="p">[</span><span class="n">component_level</span><span class="p">]</span> <span class="o">+=</span> <span class="n">repaired_comps</span><span class="p">[</span><span class="s2">&quot;monitor_times&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

            <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">mask</span><span class="p">]</span> <span class="o">=</span> <span class="n">repaired_comps</span></div>

<div class="viewcode-block" id="Components.update_monitor"><a class="viewcode-back" href="../../../api/pvrpm.core.html#pvrpm.core.components.Components.update_monitor">[docs]</a>    <span class="k">def</span> <span class="nf">update_monitor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">component_level</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">day</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates time to detection from component level, static, and cross component level monitoring based on number of failures</span>

<span class="sd">        Monitoring defined for each level is unaffected, only cross level monitoring on levels with no monitoring at that level have times updated based on failures, since monitoring defined at the component level uses the defined monitoring distribution for those components instead of the cross level monitoring</span>

<span class="sd">        Args:</span>
<span class="sd">            component_level (str): The component level to check for monitoring</span>
<span class="sd">            day (int): Current day in the simulation</span>

<span class="sd">        Note:</span>
<span class="sd">            Updates the underlying dataframes in place</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">monitors</span><span class="p">[</span><span class="n">component_level</span><span class="p">]:</span>
            <span class="n">m</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">day</span><span class="p">)</span></div>

<div class="viewcode-block" id="Components.update_indep_monitor"><a class="viewcode-back" href="../../../api/pvrpm.core.html#pvrpm.core.components.Components.update_indep_monitor">[docs]</a>    <span class="k">def</span> <span class="nf">update_indep_monitor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">day</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        If independent monitoring is defined, check it for the current day in simulation</span>

<span class="sd">        Args:</span>
<span class="sd">            day (int): Current day in the simulation</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">indep_monitor</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">indep_monitor</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">day</span><span class="p">)</span></div>

<div class="viewcode-block" id="Components.snapshot"><a class="viewcode-back" href="../../../api/pvrpm.core.html#pvrpm.core.components.Components.snapshot">[docs]</a>    <span class="k">def</span> <span class="nf">snapshot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the current state of the simulation including all internal dataframes, arrays, and variables for this object</span>

<span class="sd">        Returns:</span>
<span class="sd">            :obj:`dict`: A dictionary containing the simulation snapshot data</span>

<span class="sd">        Note:</span>
<span class="sd">            The returned objects are copies of this components objects to avoid changing data in the simulation unintentionally</span>

<span class="sd">            The returned dictionary has these keys and values:</span>
<span class="sd">                * module: DataFrame of simulation data for module level</span>
<span class="sd">                * string: DataFrame of simulation data for string level</span>
<span class="sd">                * combiner: DataFrame of simulation data for combiner level</span>
<span class="sd">                * inverter: DataFrame of simulation data for inverter level</span>
<span class="sd">                * disconnect: DataFrame of simulation data for disconnect level</span>
<span class="sd">                * transformer: DataFrame of simulation data for transformer level</span>
<span class="sd">                * grid: DataFrame of simulation data for grid level</span>
<span class="sd">                * tracker: DataFrame of simulation data for tracker level</span>
<span class="sd">                * misc_data: DataFrame containing costs (for each level), module degradation, dc and ac availability, and tracker loss/availability if tracking is used</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">costs</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;Module Costs&quot;</span><span class="p">,</span>
            <span class="s2">&quot;String Costs&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Combiner Costs&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Inverter Costs&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Disconnect Costs&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Transformer Costs&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Grid Costs&quot;</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="n">others</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;Module Degradation&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Dc Availability&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Ac Availability&quot;</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="n">ck</span><span class="o">.</span><span class="n">TRACKING</span><span class="p">]:</span>
            <span class="n">costs</span> <span class="o">+=</span> <span class="p">[</span><span class="s2">&quot;Tracker Costs&quot;</span><span class="p">]</span>
            <span class="n">others</span> <span class="o">+=</span> <span class="p">[</span><span class="s2">&quot;Tracker Loss&quot;</span><span class="p">,</span> <span class="s2">&quot;Tracker Availabilty&quot;</span><span class="p">]</span>

        <span class="n">misc</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">costs</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">others</span><span class="p">))</span>
        <span class="n">misc</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">misc</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s2">&quot;Day&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">column</span><span class="p">,</span> <span class="n">cost</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">costs</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">costs</span><span class="o">.</span><span class="n">values</span><span class="p">()):</span>
            <span class="n">misc</span><span class="p">[</span><span class="n">column</span><span class="p">]</span> <span class="o">=</span> <span class="n">cost</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

        <span class="n">misc</span><span class="p">[</span><span class="n">others</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">module_degradation_factor</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">misc</span><span class="p">[</span><span class="n">others</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dc_power_availability</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">misc</span><span class="p">[</span><span class="n">others</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ac_power_availability</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">case</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="n">ck</span><span class="o">.</span><span class="n">TRACKING</span><span class="p">]:</span>
            <span class="n">misc</span><span class="p">[</span><span class="n">others</span><span class="p">[</span><span class="mi">3</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tracker_power_loss_factor</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
            <span class="n">misc</span><span class="p">[</span><span class="n">others</span><span class="p">[</span><span class="mi">4</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tracker_availability</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

        <span class="n">d</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">comp</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">comps</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">d</span><span class="p">[</span><span class="n">comp</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

        <span class="n">d</span><span class="p">[</span><span class="s2">&quot;misc_data&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">misc</span>

        <span class="k">return</span> <span class="n">d</span></div></div>
</pre></div>

           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, FSEC.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>